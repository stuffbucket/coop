#!/bin/sh
# Run fast local checks before push
# Full CI runs on GitHub - this is just a quick sanity check
set -e

echo "Running pre-push checks..."

# Quick lint with golangci-lint
echo "→ Linting..."
golangci-lint run --fast-only

# Build to catch compile errors
echo "→ Building..."
go build ./...

# Run short tests only (skip integration/slow tests)
echo "→ Testing (short)..."
go test -short ./...

# Vulnerability scan (if govulncheck available)
if command -v govulncheck >/dev/null 2>&1; then
  echo "→ Vulnerability scan..."
  ./scripts/govulncheck.sh
fi

echo "✓ All pre-push checks passed"
